function _classCallCheck(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,c){for(var t=0;t<c.length;t++){var o=c[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(c,t,o){return t&&e(c.prototype,t),o&&e(c,o),c}}(),CcmBar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){if(ccm.ccmBar.html)ccm.ccmBar.show();else{var e=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/bar.html?version="+ccmWrapper.version+"-"+ccmWrapper.contentId,!0),e.timeout=ccmWrapper.config.XMLHttpRequestTimeout,e.onreadystatechange=function(){if(CcmLog.debug("XHR ready state changed",e),4==e.readyState){if(200!=e.status)throw CcmLog.error("Received HTTP status code "+e.status+" on requesting CCM bar HTML",e),"exit";ccm.ccmBar.html=e.responseText,setTimeout(ccm.ccmBar.show,1e4)}},e.onerror=function(e){throw CcmLog.error("Error on requesting CCM bar HTML",e),"exit"},e.ontimeout=function(e){throw CcmLog.error("Timeout on requesting CCM bar HTML",e),"exit"},e.send()}}},{key:"show",value:function(){ccm.ccmBar.loadStylesheet();var e=document.createElement("div");e.innerHTML=ccm.ccmBar.html,ccm.allCategoriesAnswered()||-1===Array.from(e.querySelector("#ccm_notification .ccm_btn").classList).indexOf("ccm_btn_disabled")&&e.querySelector("#ccm_notification .ccm_btn").classList.add("ccm_btn_disabled"),document.body.insertBefore(e.firstChild,document.body.childNodes[0]),document.querySelectorAll("#ccm_notification input[type=radio]").forEach(function(e){try{e.value===ccm.categoryCookies[e.name].value&&(e.checked=!0,e.parentElement.parentElement.classList.add("ccm_col_content_cookieitem-radiowrap--selected")),e.addEventListener("change",ccm.ccmBar.changeSetting)}catch(e){CcmLog.error(e)}});try{document.querySelector("#ccm_notification .ccm_btn").addEventListener("click",ccm.ccmBar.giveConsent),document.querySelector("#ccm_notification #ccm_toggle_extended--open").addEventListener("click",function(e){return e.preventDefault(),ccm.ccmBar.toggleExtended("open"),!1}),document.querySelector("#ccm_notification #ccm_toggle_extended--close").addEventListener("click",function(e){return e.preventDefault(),ccm.ccmBar.toggleExtended("close"),!1})}catch(e){CcmLog.error(e)}document.body.style.position="relative",ccm.showSettingsLink(),window.onresize=function(e){ccm.ccmBar.setSizes()},ccm.ccmBar.setSizes()}},{key:"changeSetting",value:function(e){var c=e.target;-1!==Array.from(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList).indexOf("ccm_btn_disabledmessage--show")&&document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.remove("ccm_btn_disabledmessage--show"),-1===Array.from(c.parentElement.parentElement.classList).indexOf("ccm_col_content_cookieitem-radiowrap--selected")&&c.parentElement.parentElement.classList.add("ccm_col_content_cookieitem-radiowrap--selected"),ccm.categoryCookies[c.name].value=c.value,ccm.categoryCookies[c.name].store(),ccm.allCategoriesAnswered()&&-1!==Array.from(document.querySelector("#ccm_notification .ccm_btn").classList).indexOf("ccm_btn_disabled")&&document.querySelector("#ccm_notification .ccm_btn").classList.remove("ccm_btn_disabled"),ccm.hasAnswered()&&(ccm.consentCookie.value="false",ccm.consentCookie.store())}},{key:"giveConsent",value:function(e){ccm.giveConsent()?location.reload():-1===Array.from(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList).indexOf("ccm_btn_disabledmessage--show")&&(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.add("ccm_btn_disabledmessage--show"),setTimeout(function(){document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.remove("ccm_btn_disabledmessage--show")},2e3))}},{key:"setSizes",value:function(){if(CcmLog.info("ccm.ccmBar.setSizes() called"),"99999998"!==window.getComputedStyle(document.getElementById("ccm_notification")).getPropertyValue("z-index")){var e=50;ccm.ccmBar.barReadyAttempt||(ccm.ccmBar.barReadyAttempt=1),ccm.ccmBar.barReadyAttempt>4&&(e=200),ccm.ccmBar.barReadyAttempt=ccm.ccmBar.barReadyAttempt+1,console.log(),ccm.ccmBar.barReadyAttempt<30?(CcmLog.info("Bar styling is not done rendering yet. This was attempt: "+ccm.ccmBar.barReadyAttempt+". Setting timeout for the next attempt to: "+e+"ms"),setTimeout(ccm.ccmBar.setSizes,e)):CcmLog.error("Bar styling is was not done rendering after "+ccm.ccmBar.barReadyAttempt+" attempts. Stop waiting for bar styling to render.")}else document.getElementById("ccm_notification").style.top="-"+document.getElementById("ccm_notification").offsetHeight+"px",CcmLog.debug("Setting ccm_notification top styling to:"+document.getElementById("ccm_notification").style.top),document.body.style.marginTop=document.getElementById("ccm_notification").offsetHeight+"px",CcmLog.debug("Setting body margin_top styling to:"+document.body.style.marginTop)}},{key:"loadStylesheet",value:function(){var e=ccmWrapper.createStyle(ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/ccm-bar_v3.1.10.css");document.head.appendChild(e)}},{key:"toggleExtended",value:function(e){"open"===e?(document.querySelector("#ccm_notification #ccm_toggle_extended--open").style.display="none",document.querySelector("#ccm_notification #ccm_toggle_extended--close").style.display="inline",document.querySelector("#ccm_notification #ccm_col_content_extended").classList.add("ccm_col_content_extended--open")):(document.querySelector("#ccm_notification #ccm_toggle_extended--open").style.display="inline",document.querySelector("#ccm_notification #ccm_toggle_extended--close").style.display="none",document.querySelector("#ccm_notification #ccm_col_content_extended").classList.remove("ccm_col_content_extended--open")),ccm.ccmBar.setSizes()}}]),e}(),CcmNPOLowerBar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(e){if(ccm.cookieMessage.html)ccm.cookieMessage.show(e);else{var c=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("GET",ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/npo_lowerbar.html?version="+ccmWrapper.version+"-"+ccmWrapper.contentId,!0),c.timeout=ccmWrapper.config.XMLHttpRequestTimeout,c.onreadystatechange=function(){if(CcmLog.debug("XHR ready state changed",c),4==c.readyState){if(200!=c.status)throw CcmLog.error("Received HTTP status code "+c.status+" on requesting CCM lower bar HTML",c),"exit";ccm.cookieMessage.html=c.responseText,ccm.cookieMessage.show(e)}},c.onerror=function(e){throw CcmLog.error("Error on requesting CCM lower bar HTML",e),"exit"},c.ontimeout=function(e){throw CcmLog.error("Timeout on requesting CCM lower bar HTML",e),"exit"},c.send()}}},{key:"show",value:function(e){ccm.cookieMessage.loadStylesheet();var c=document.createElement("div");c.innerHTML=ccm.cookieMessage.html,document.body.appendChild(c.firstChild),document.querySelectorAll("#ccm_notification input[type=radio]").forEach(function(e){try{e.value===ccm.categoryCookies[e.name].value&&(e.checked=!0,e.parentElement.parentElement.classList.add("ccm_col_content_cookieitem-radiowrap--selected")),e.addEventListener("change",ccm.cookieMessage.changeSetting)}catch(e){CcmLog.error(e)}});try{void 0!==e&&"skipPreBar"in e&&e.skipPreBar&&ccm.cookieMessage.preBarNextStep(),ccm.allCategoriesAnswered()||document.querySelector("#ccm_notification .ccm_btn--save").classList.add("ccm_btn_disabled"),ccm.noneCategoriesAnswered()?document.querySelector("#ccm_notification .ccm_btn--accept-all").classList.remove("ccm_hidden_content"):document.querySelector("#ccm_notification .ccm_btn--save").classList.remove("ccm_hidden_content"),document.querySelector("#ccm_notification .ccm_btn--save").addEventListener("click",ccm.cookieMessage.giveConsent),document.querySelector("#ccm_notification .ccm_btn--accept-all").addEventListener("click",ccm.cookieMessage.acceptCCM),document.querySelector("#ccm_notification .ccm_btn--pre-step-next").addEventListener("click",ccm.cookieMessage.preBarNextStep),document.querySelector("#ccm_notification .ccm_btn--pre-step-previous").addEventListener("click",ccm.cookieMessage.preBarPreviousStep),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.addEventListener("click",function(e){return e.preventDefault(),ccm.cookieMessage.toggleExtended("open"),ccm.dispatchEvent("CCM_show_more_info",{target:e.target}),!1})}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.addEventListener("click",function(e){return e.preventDefault(),ccm.cookieMessage.toggleExtended("close"),ccm.dispatchEvent("CCM_hide_more_info",{target:e.target}),!1})});var t=document.createElement("a"),o=document.createTextNode("Naar cookieinstellingen");t.appendChild(o),t.title="Naar cookieinstellingen",t.className="ccm_skip",t.href="#ccm_notification",document.body.prepend(t),ccm.dispatchEvent("CCM_CookieMessage_done")}catch(e){CcmLog.error(e)}ccm.showSettingsLink()}},{key:"acceptCCM",value:function(e){ccm.cookieMessage.massUpdateOptionalCategories("true"),ccm.dispatchEvent("CCM_consent_accept_all",{target:e.target}),ccm.cookieMessage.giveConsent(e)}},{key:"declineCCM",value:function(e){ccm.cookieMessage.massUpdateOptionalCategories("false"),ccm.dispatchEvent("CCM_consent_decline_all",{target:e.target}),ccm.cookieMessage.giveConsent(e)}},{key:"massUpdateOptionalCategories",value:function(e){return Object.entries(ccm.config.cookieCategories).forEach(function(c){if(null==c[1].defaultConsent){var t=c[0];ccm.categoryCookies[t].value=e,ccm.categoryCookies[t].store()}}),!0}},{key:"changeSetting",value:function(e){var c=e.target;-1!==Array.from(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList).indexOf("ccm_btn_disabledmessage--show")&&document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.remove("ccm_btn_disabledmessage--show"),-1===Array.from(c.parentElement.parentElement.classList).indexOf("ccm_col_content_cookieitem-radiowrap--selected")&&c.parentElement.parentElement.classList.add("ccm_col_content_cookieitem-radiowrap--selected"),ccm.dispatchEvent("CCM_provide_consent_preference",{target:c,category:c.name,old_value:ccm.categoryCookies[c.name].value,new_value:c.value}),ccm.categoryCookies[c.name].value=c.value,ccm.categoryCookies[c.name].store(),ccm.allCategoriesAnswered()?-1!==Array.from(document.querySelector("#ccm_notification .ccm_btn--save").classList).indexOf("ccm_btn_disabled")&&document.querySelector("#ccm_notification .ccm_btn--save").classList.remove("ccm_btn_disabled"):document.querySelector("#ccm_notification .ccm_btn--save").classList.add("ccm_btn_disabled"),ccm.noneCategoriesAnswered()||(document.querySelector("#ccm_notification .ccm_btn--save").classList.remove("ccm_hidden_content"),document.querySelector("#ccm_notification .ccm_btn--accept-all").classList.add("ccm_hidden_content")),ccm.hasAnswered()&&(ccm.consentCookie.value="false",ccm.consentCookie.store(),ccm.dispatchEvent("CCM_consent_revoked_by_consent_preference_change"))}},{key:"giveConsent",value:function(e){ccm.giveConsent()?location.reload():-1===Array.from(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList).indexOf("ccm_btn_disabledmessage--show")&&(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.add("ccm_btn_disabledmessage--show"),setTimeout(function(){document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.remove("ccm_btn_disabledmessage--show")},2e3))}},{key:"preBarNextStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.querySelector("#ccm_notification").classList.remove("ccm_notification--mobile_pre_step"),document.querySelector("body").classList.add("ccm_no_scroll"),e?ccm.dispatchEvent("CCM_prebar_preferences",{target:e.target}):ccm.dispatchEvent("CCM_prebar_preferences",{target:window})}},{key:"preBarPreviousStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ccm.cookieMessage.toggleExtended("close"),document.querySelector("body").classList.remove("ccm_no_scroll"),document.querySelector("#ccm_notification.ccm_notifications--mobile_pre_step_available").classList.add("ccm_notification--mobile_pre_step"),e?ccm.dispatchEvent("CCM_back_to_prebar",{target:e.target}):ccm.dispatchEvent("CCM_back_to_prebar",{target:window})}},{key:"loadStylesheet",value:function(){var e=ccmWrapper.createStyle(ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/npo-lowerbar_v3.1.10.css");document.head.appendChild(e)}},{key:"toggleExtended",value:function(e){"open"===e?(document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.style.display="none"}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.style.display="inline-block"}),document.querySelector("#ccm_notification #ccm_col_content_extended").classList.add("ccm_col_content_extended--open"),document.querySelector("#ccm_notification").classList.add("ccm_notification_more_info")):(document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.style.display="inline-block"}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.style.display="none"}),document.querySelector("#ccm_notification #ccm_col_content_extended").classList.remove("ccm_col_content_extended--open"),document.querySelector("#ccm_notification").classList.remove("ccm_notification_more_info"))}},{key:"hightlightCategory",value:function(e){document.querySelector("#ccm_notification input[type=radio][name="+e+"][value=true]").parentElement.parentElement.parentElement.classList.add("ccm_col_content_cookieitem-highlighted")}}]),e}(),CcmNPONoCatLowerBar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(e){if(ccm.viewsCookie=new CcmCookie("Cookie_view"),ccm.viewsCookie.expires=new Date,ccm.viewsCookie.expires.setTime(ccm.viewsCookie.expires.getTime()+15552e6),ccm.viewsCookie.isSet?parseInt(ccm.viewsCookie.value,10)>=2?(CcmLog.info("More then 2 pageviews with a cookie bar visible, giving auto consent"),ccm.viewsCookie.delete(),ccm.dispatchEvent("CCM_auto_consent"),ccm.cookieMessage.giveConsent(event)):(CcmLog.info("Cookie bar counter found, incrementing the cookie bar view counter"),ccm.viewsCookie.value=parseInt(ccm.viewsCookie.value,10)+1,ccm.viewsCookie.store()):(CcmLog.info("No cookie bar counter found, creating a new one"),ccm.viewsCookie.value=1,ccm.viewsCookie.store()),ccm.cookieMessage.html)ccm.cookieMessage.show(e);else{var c=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("GET",ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/npo_nocatlowerbar.html?version="+ccmWrapper.version+"-"+ccmWrapper.contentId,!0),c.timeout=ccmWrapper.config.XMLHttpRequestTimeout,c.onreadystatechange=function(){if(CcmLog.debug("XHR ready state changed",c),4==c.readyState){if(200!=c.status)throw CcmLog.error("Received HTTP status code "+c.status+" on requesting CCM lower bar HTML",c),"exit";ccm.cookieMessage.html=c.responseText,ccm.cookieMessage.show(e)}},c.onerror=function(e){throw CcmLog.error("Error on requesting CCM lower bar HTML",e),"exit"},c.ontimeout=function(e){throw CcmLog.error("Timeout on requesting CCM lower bar HTML",e),"exit"},c.send()}}},{key:"show",value:function(e){ccm.cookieMessage.loadStylesheet();var c=document.createElement("div");c.innerHTML=ccm.cookieMessage.html,document.body.appendChild(c.firstChild);try{document.querySelector("#ccm_notification #ccm_close").addEventListener("click",ccm.cookieMessage.dismissCCM),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.addEventListener("click",function(e){return e.preventDefault(),ccm.cookieMessage.toggleExtended("open"),ccm.dispatchEvent("CCM_show_more_info",{target:e.target}),!1})}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.addEventListener("click",function(e){return e.preventDefault(),ccm.cookieMessage.toggleExtended("close"),ccm.dispatchEvent("CCM_hide_more_info",{target:e.target}),!1})});var t=document.createElement("a"),o=document.createTextNode("Naar cookieinstellingen");t.appendChild(o),t.title="Naar cookieinstellingen",t.className="ccm_skip",t.href="#ccm_notification",document.body.prepend(t),ccm.dispatchEvent("CCM_CookieMessage_done")}catch(e){CcmLog.error(e)}ccm.showSettingsLink()}},{key:"dismissCCM",value:function(e){CcmLog.debug("Dismissed CCM"),ccm.dispatchEvent("CCM_consent_dismiss",{target:e.target}),ccm.cookieMessage.giveConsent(e,!0)}},{key:"giveConsent",value:function(e,c){ccm.giveConsent()&&!0===c&&location.reload()}},{key:"loadStylesheet",value:function(){var e=ccmWrapper.createStyle(ccmWrapper.config.assetsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/npo-nocatlowerbar_v3.1.10.css");document.head.appendChild(e)}},{key:"toggleExtended",value:function(e){"open"===e?(document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.style.display="none"}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.style.display="inline-block"}),document.querySelector("#ccm_notification #ccm_col_content_extended").classList.add("ccm_col_content_extended--open"),document.querySelector("#ccm_notification").classList.add("ccm_notification_more_info")):(document.querySelectorAll("#ccm_notification .ccm_toggle_extended--open").forEach(function(e){e.style.display="inline-block"}),document.querySelectorAll("#ccm_notification .ccm_toggle_extended--close").forEach(function(e){e.style.display="none"}),document.querySelector("#ccm_notification #ccm_col_content_extended").classList.remove("ccm_col_content_extended--open"),document.querySelector("#ccm_notification").classList.remove("ccm_notification_more_info"))}},{key:"hightlightCategory",value:function(e){}}]),e}(),CcmNoBar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){}},{key:"acceptCCM",value:function(e){ccm.ccmNoBar.massUpdateOptionalCategories("true"),ccm.ccmNoBar.giveConsent(e)}},{key:"declineCCM",value:function(e){ccm.ccmNoBar.massUpdateOptionalCategories("false"),ccm.ccmNoBar.giveConsent(e)}},{key:"massUpdateOptionalCategories",value:function(e){return Object.entries(ccm.config.cookieCategories).forEach(function(c){if(null==c[1].defaultConsent){var t=c[0];ccm.categoryCookies[t].value=e,ccm.categoryCookies[t].store()}}),!0}},{key:"giveConsent",value:function(e){ccm.giveConsent()?location.reload():-1===Array.from(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList).indexOf("ccm_btn_disabledmessage--show")&&(document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.add("ccm_btn_disabledmessage--show"),setTimeout(function(){document.querySelector("#ccm_notification .ccm_btn_disabledmessage").classList.remove("ccm_btn_disabledmessage--show")},2e3))}}]),e}(),CcmNPOATAnalytics=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(e){if("undefined"!=typeof ATInternet)try{ccm.analytics.level2=ATInternet.Tracker.instances[0].getContext("page").level2,ccm.analytics.tag=new ATInternet.Tracker.Tag,window.addEventListener("CCM_cid_consent_revoked",function(e){ccm.analytics.send(!1,"[cid gewijzigde toestemming ingetrokken]")},!1),window.addEventListener("CCM_show_cookie_message",function(e){ccm.analytics.send(!1,"[geen toestemming toon cookie bericht]")},!1),window.addEventListener("CCM_show_settings_page",function(e){ccm.analytics.send(e.detail.target,"[pagina met instellingen weergeven")},!1),window.addEventListener("CCM_reopen_cookie_message",function(e){ccm.analytics.send(e.detail.target,"[open cookie bericht opnieuw ]")},!1),window.addEventListener("CCM_reopen_cookie_message_with_highlighting",function(e){e.detail.categories.forEach(function(c){ccm.analytics.send(e.detail.target,"[open cookie bericht opnieuw met markering]","["+c+"]")})},!1),window.addEventListener("CCM_reconsent_stored",function(e){Object.entries(ccm.categoryCookies).forEach(function(e){var c=e[0];e=e[1];var t=void 0;t="true"==e.value?"geaccepteerd ":"geweigerd",ccm.analytics.send(!1,"[reconsent opgeslagen]","["+c+"]","["+t+"]","[placeholderchange]")})},!1),window.addEventListener("CCM_consent_stored",function(e){Object.entries(ccm.categoryCookies).forEach(function(e){var c=e[0];e=e[1];var t=void 0;t="true"==e.value?"geaccepteerd":"geweigerd",ccm.analytics.send(!1,"[consent opgeslagen]","["+c+"]","["+t+"]","[change]","[individuele configuratie]")})},!1),window.addEventListener("CCM_show_more_info",function(e){ccm.analytics.send(e.detail.target,"[toon meer info]")},!1),window.addEventListener("CCM_hide_more_info",function(e){ccm.analytics.send(e.detail.target,"[verberg meer info]")},!1),window.addEventListener("CCM_consent_accept_all",function(e){ccm.analytics.send(!1,"[consent accepteer allemaal]","","","","[accepteer alles]")},!1),window.addEventListener("CCM_consent_decline_all",function(e){ccm.analytics.send(!1,"[consent afwijzen allemaal]")},!1),window.addEventListener("CCM_consent_dismiss",function(e){ccm.analytics.send(!1,"[cookie melding gesloten]")},!1),window.addEventListener("CCM_auto_consent",function(e){ccm.analytics.send(!1,"[consent automatisch]")},!1),window.addEventListener("CCM_provide_consent_preference",function(e){var c=void 0;c="true"==e.detail.new_value?"geaccepteerd":"geweigerd",ccm.analytics.send(e.detail.target,"[consent voorkeur opgeven]","["+e.detail.category+"]","["+c+"]")},!1),window.addEventListener("CCM_consent_revoked_by_consent_preference_change",function(e){ccm.analytics.send(e.detail.target,"[toestemming ingetrokken door toestemming voorkeurwijziging]")},!1),window.addEventListener("CCM_prebar_preferences",function(e){ccm.analytics.send(e.detail.target,"[prebar geeft voorkeuren]")},!1),window.addEventListener("CCM_back_to_prebar",function(e){ccm.analytics.send(e.detail.target,"[terug naar prebar]")},!1)}catch(e){CcmLog.error(e)}else{var c=50;ccm.analytics.ATAnalyticsReadyAttempt||(ccm.analytics.ATAnalyticsReadyAttempt=0),ccm.analytics.ATAnalyticsReadyAttempt=ccm.analytics.ATAnalyticsReadyAttempt+1,ccm.analytics.ATAnalyticsReadyAttempt>4&&(c=200),ccm.analytics.ATAnalyticsReadyAttempt<20?(CcmLog.info("AT Analytics is not loaded yet. This was attempt: "+ccm.analytics.ATAnalyticsReadyAttempt+". Setting timeout for the next attempt to: "+c+"ms"),setTimeout(ccm.analytics.init,c,e)):CcmLog.error("AT Analytics was not done loading after "+ccm.analytics.ATAnalyticsReadyAttempt+" attempts. Stop waiting for Analytics.")}}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";try{e||(e=this),ccm.analytics.tag.publisher.send({elem:e,click:{campaignId:encodeURIComponent("[ccm]"),creation:encodeURIComponent(c),variant:encodeURIComponent(t),format:encodeURIComponent(o),generalPlacement:encodeURIComponent("["+ccm.analytics.level2+"]"),detailedPlacement:encodeURIComponent("[CCM "+ccmWrapper.version+"]"),advertiserId:encodeURIComponent(n),url:encodeURIComponent(i)}})}catch(e){CcmLog.error(e)}}}]),e}(),CcmCore=function(){function e(){_classCallCheck(this,e),this.config={log:{log:!0,info:!0,debug:!0,warning:!0,error:!0},organisation:"NPO",site:"nporadio2.nl",cookieDomain:".nporadio2.nl",cookiePath:"/",cookieCategories:"{\"necessary\":{\"defaultConsent\":\"true\",\"required\":1,\"requireConsent\":0,\"activateClass\":\"npo_cc_necessary\",\"inlineClass\":\"npo_cc_inline_necessary\",\"placeholderClass\":\"npo_cc_placeholder_necessary\"},\"analytics\":{\"defaultConsent\":\"true\",\"required\":1,\"requireConsent\":0,\"activateClass\":\"npo_cc_analytics\",\"inlineClass\":\"npo_cc_inline_analytics\",\"placeholderClass\":\"npo_cc_placeholder_analytics\"},\"social\":{\"defaultConsent\":null,\"required\":1,\"requireConsent\":1,\"activateClass\":\"npo_cc_social\",\"inlineClass\":\"npo_cc_inline_social\",\"placeholderClass\":\"npo_cc_placeholder_social\"}}",cookieMessageType:"NPO lower bar",analyticsType:"CcmNPOATAnalytics",ccmConsentCookieName:"cookie_consent_date",ccmCookieIdCookieName:"CCM_ID",executed:!1,state:"loaded"},this.config.cookieCategories=JSON.parse(this.config.cookieCategories),this.categoryCookies=[],this.dispatchEvent("CCM_loaded")}return _createClass(e,[{key:"preprocess",value:function(){ccm.config.state="ready",ccm.dispatchEvent("CCM_ready")}},{key:"init",value:function(e){if(ccm.config.executed)return!1;ccm.config.executed=!0,CcmLog.info("Running init()"),e&&(CcmLog.debug("Init contains an overruling config",e),ccm.config=Object.assign(ccm.config,e),CcmLog.debug("New CCM config",ccm.config)),ccm.config.analyticsType&&(CcmLog.info("Loading analytics: "+ccm.config.analyticsType),ccm.loadAnalytics()),ccm.consentCookie=new CcmCookie("Cookie_Consent"),ccm.consentCookie.expires=new Date,ccm.consentCookie.expires.setTime(ccm.consentCookie.expires.getTime()+15552e6),ccm.consentCookie.isSet||(ccm.consentCookie.value="false",ccm.consentCookie.store()),ccm.idCookie=new CcmCookie(ccm.config.ccmCookieIdCookieName),ccm.consentCookie.expires=new Date,ccm.consentCookie.expires.setTime(ccm.consentCookie.expires.getTime()+31536e7),ccm.idCookie.isSet?(CcmLog.info("Checking the cookie ID."),ccm.idCookie.value!==ccmWrapper.cookieId&&(CcmLog.debug("Detected that a new cookie ID.",ccm.idCookie.value,ccmWrapper.cookieId),ccm.hasAnswered()&&(CcmLog.info("Cookie ID has changed, revoking consent."),ccm.dispatchEvent("CCM_cid_consent_revoked"),ccm.consentCookie.value="false",ccm.consentCookie.store()),ccm.idCookie.value=ccmWrapper.cookieId,ccm.idCookie.store())):(ccm.idCookie.value=ccmWrapper.cookieId,ccm.idCookie.store(),ccm.hasAnswered()&&(CcmLog.info("Cookie ID was lost, revoking consent."),ccm.consentCookie.value="false",ccm.consentCookie.store())),Object.keys(ccm.config.cookieCategories).forEach(function(e){ccm.categoryCookies[e]=new CcmCookie("Cookie_Category_"+e.charAt(0).toUpperCase()+e.slice(1)),ccm.categoryCookies[e].expires=new Date,ccm.categoryCookies[e].expires.setTime(ccm.consentCookie.expires.getTime()+31536e7),ccm.categoryCookies[e].isSet?("true"!==ccm.categoryCookies[e].value&&"false"!==ccm.categoryCookies[e].value&&""!==ccm.categoryCookies[e].value&&(CcmLog.warning("Not accepted value found in "+e+" cookie value. Resetting its value!",ccm.categoryCookies[e]),ccm.categoryCookies[e].value=null==ccm.config.cookieCategories[e].defaultConsent?"":ccm.config.cookieCategories[e].defaultConsent,ccm.categoryCookies[e].store()),ccm.hasAnswered()&&ccm.config.cookieCategories[e].required&&""==ccm.categoryCookies[e].value&&(CcmLog.info(e+" is a required cookie category but has no value, revoking the users consent."),ccm.consentCookie.value="false",ccm.consentCookie.store())):(ccm.categoryCookies[e].value=null==ccm.config.cookieCategories[e].defaultConsent?"":ccm.config.cookieCategories[e].defaultConsent,ccm.categoryCookies[e].store(),ccm.hasAnswered()&&ccm.config.cookieCategories[e].required&&(CcmLog.info(e+" is a required cookie category but has no value, revoking the users consent."),ccm.consentCookie.value="false",ccm.consentCookie.store()))}),"false"!==ccm.consentCookie.value&&""!==ccm.consentCookie.value||(setTimeout(ccm.showCookieMessage(),2e3),ccm.dispatchEvent("CCM_show_cookie_message")),ccm.evaluateDom(),ccm.config.state="done",ccm.dispatchEvent("CCM_done")}},{key:"evaluateDom",value:function(){CcmLog.info("Evaluating DOM contents"),ccm.showSettingsLink(),ccm.showCookieMessageLink(),ccm.showHightlightedCategoryLink(),Object.entries(ccm.categoryCookies).forEach(function(e){var c=e[0];e=e[1],ccm.config.cookieCategories[c].requireConsent&&!ccm.hasAnswered()||"false"!==e.value&&""!==e.value&&(ccm.removePlaceholders(ccm.config.cookieCategories[c].placeholderClass),ccm.runScripts(ccm.config.cookieCategories[c].activateClass),ccm.runScripts(ccm.config.cookieCategories[c].inlineClass),ccm.runIframes(ccm.config.cookieCategories[c].activateClass),ccm.runImg(ccm.config.cookieCategories[c].activateClass),ccm.runEmbed(ccm.config.cookieCategories[c].activateClass),ccm.rubObject(ccm.config.cookieCategories[c].activateClass))})}},{key:"getCategoryConsent",value:function(e){if("object"==_typeof(ccm.categoryCookies[e]))return ccm.config.cookieCategories[e].requireConsent&&!ccm.hasAnswered()?null:"true"===ccm.categoryCookies[e].value}},{key:"hasAnswered",value:function(){return"false"!=ccm.consentCookie.value&&""!=ccm.consentCookie.value}},{key:"getPermissions",value:function(){var e={};return Object.entries(ccm.categoryCookies).forEach(function(c){var t=c[0];c=c[1],ccm.config.cookieCategories[t].requireConsent&&!ccm.hasAnswered()?e[t]=null:e[t]="true"===c.value}),e}},{key:"get_permissions",value:function(){var e=[];return Object.entries(ccm.categoryCookies).forEach(function(c){var t=c[0];c=c[1],ccm.config.cookieCategories[t].requireConsent&&!ccm.hasAnswered()||"true"===c.value&&e.push(t)}),e}},{key:"has_banner",value:function(){return!!ccm.cookieMessage}},{key:"on_consent",value:function(e,c){ccm.getCategoryConsent(e)&&(ccm.is_function(c)?c():(c=function(){})())}},{key:"on_no_consent",value:function(e,c){ccm.getCategoryConsent(e)||(ccm.is_function(c)?c():(c=function(){})())}},{key:"isDone",value:function(){return"done"===ccm.config.state}},{key:"is_function",value:function(e){var c={};return e&&"[object Function]"==c.toString.call(e)}},{key:"loadAnalytics",value:function(e){if(ccm.analytics)return CcmLog.debug("Cant load analytics. Analytic class is already loaded."),!1;switch(ccm.config.analyticsType){case"CcmNPOATAnalytics":ccm.analytics=new CcmNPOATAnalytics,ccm.analytics.init(e)}}},{key:"showCookieMessage",value:function(e){if(ccm.cookieMessage)return CcmLog.debug("Cant show Cookie Message. Cookie Message is already loaded."),!1;switch(ccm.config.cookieMessageType){case"bar":ccm.showCookieMessageBar(e);break;case"NPO lower bar":ccm.showCookieMessageNPOLowerBar(e);break;case"NPO no category lower bar":ccm.showCookieMessageNPONoCatLowerBar(e);break;case"embed":ccm.showCookieMessageEmbed(e);break;case"nobar":ccm.showCookieMessageNoBar(e);break;default:ccm.showCookieMessageBar(e)}}},{key:"showSettingsLink",value:function(){document.querySelectorAll("a.ccm_settings_link, a.npo_cc_settings_link").forEach(function(e){e.href=ccmWrapper.config.ccmSettingsBaseUrl+"/sites/"+ccmWrapper.config.organisation+"/"+ccmWrapper.config.site+"/settings.html?version="+encodeURIComponent(ccmWrapper.version+"-"+ccmWrapper.contentId)+"&referrer="+encodeURIComponent(window.location.href),e.addEventListener("click",function(e){ccm.dispatchEvent("CCM_show_settings_page",{target:e.target})})})}},{key:"showCookieMessageLink",value:function(){document.querySelectorAll("a.ccm_message_link").forEach(function(e){e.href="#",e.addEventListener("click",function(e){return e.preventDefault(),ccm.showCookieMessage(),ccm.dispatchEvent("CCM_reopen_cookie_message",{target:e.target}),!1})})}},{key:"showHightlightedCategoryLink",value:function(){document.querySelectorAll("a.ccm_message_highlight_link").forEach(function(e){e.href="#",e.addEventListener("click",function(e){return e.preventDefault(),window.addEventListener("CCM_CookieMessage_done",function(c){e.target.dataset.ccmCategories.split(",").forEach(function(c){
"object"!=_typeof(ccm.categoryCookies[c])?CcmLog.warning("Category "+c+" does not exist!",e.target):ccm.cookieMessage.hightlightCategory(c)})},!1),ccm.showCookieMessage({skipPreBar:!0}),ccm.dispatchEvent("CCM_reopen_cookie_message_with_highlighting",{target:e.target,categories:e.target.dataset.ccmCategories.split(",")}),!1})})}},{key:"removePlaceholders",value:function(e){document.querySelectorAll("."+e).forEach(function(e){e.parentNode.removeChild(e)})}},{key:"runScripts",value:function(e){document.querySelectorAll('script[type="text/plain"].'+e).forEach(function(e){var c=document.createElement("script");c.type="text/javascript",e.getAttribute("data-src")&&(c.src=e.getAttribute("data-src")),c.text=e.textContent,document.head.appendChild(c),e.parentNode.removeChild(e)})}},{key:"runIframes",value:function(e){document.querySelectorAll("iframe."+e).forEach(function(e){e.src=e.getAttribute("data-src")})}},{key:"runImg",value:function(e){document.querySelectorAll("img."+e).forEach(function(e){e.src=e.getAttribute("data-src")})}},{key:"runEmbed",value:function(e){document.querySelectorAll("embed."+e).forEach(function(e){e.src=e.getAttribute("data-src")})}},{key:"rubObject",value:function(e){document.querySelectorAll("object."+e).forEach(function(e){e.data=e.getAttribute("data-src")})}},{key:"showCookieMessageBar",value:function(e){ccm.ccmBar=new CcmBar,ccm.ccmBar.init(e)}},{key:"showCookieMessageNPOLowerBar",value:function(e){ccm.cookieMessage=new CcmNPOLowerBar,ccm.cookieMessage.init(e)}},{key:"showCookieMessageNPONoCatLowerBar",value:function(e){ccm.cookieMessage=new CcmNPONoCatLowerBar,ccm.cookieMessage.init(e)}},{key:"showCookieMessageNoBar",value:function(e){ccm.ccmNoBar=new CcmNoBar,ccm.ccmNoBar.init(e)}},{key:"showCookieMessageEmbed",value:function(){throw CcmLog.error("Embedded cookie message is not yet implemented!"),"exit"}},{key:"noneCategoriesAnswered",value:function(){var e=!0;try{return Object.entries(ccm.categoryCookies).forEach(function(c){var t=c[0];if(c=c[1],ccm.config.cookieCategories[t].required&&null===ccm.config.cookieCategories[t].defaultConsent&&""!==c.value)throw e=!1,"BreakException"}),e}catch(c){if("BreakException"===c)return e;CcmLog.error(c)}}},{key:"allCategoriesAnswered",value:function(){var e=!0;try{return Object.entries(ccm.categoryCookies).forEach(function(c){var t=c[0];if(c=c[1],ccm.config.cookieCategories[t].required&&""===c.value)throw e=!1,"BreakException"}),e}catch(c){if("BreakException"===c)return e;CcmLog.error(c)}}},{key:"giveConsent",value:function(){if(ccm.allCategoriesAnswered()){var e=new Date;return ccm.hasAnswered()?ccm.dispatchEvent("CCM_reconsent_stored"):ccm.dispatchEvent("CCM_consent_stored"),CcmLog.debug(e),ccm.consentCookie.value=e.toString(),CcmLog.debug(e),ccm.consentCookie.store(),!0}return!1}},{key:"dispatchEvent",value:function(e){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var t=void 0;"function"==typeof window.CustomEvent?t=c?new CustomEvent(e,{detail:c}):new Event(e):c?(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!1,!0,c)):(t=document.createEvent("HTMLEvents"),t.initEvent(e,!1,!0)),window.dispatchEvent(t)}catch(e){CcmLog.error(e)}}}]),e}(),ccm;ccm=new CcmCore,CcmLog.debug("CCM config",ccm.config),ccm.preprocess();